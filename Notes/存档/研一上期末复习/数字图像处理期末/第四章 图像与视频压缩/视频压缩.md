视频压缩是一个非常庞大且精妙的领域，但既然你已经理解了 DCT 和 JPEG 图像压缩的基础，理解视频压缩就会容易很多。

用一句话总结视频压缩的核心思想：只记录变化的东西。

视频本质上就是连续播放的一张张图片（帧）。如果每秒播放 30 张（30fps），而每一张都当成独立的 JPEG 图片来存，数据量会大得惊人。视频压缩为了解决这个问题，引入了比 JPEG 更进一度的压缩维度：时间。

以下是视频压缩的详细介绍：

## 核心原理：消除两种"冗余"

视频压缩主要是在消除两类重复信息：

- 空间冗余：这是您刚学过的 JPEG/DCT 做的事情。在一张画面内部，相邻像素很像（比如蓝天），不需要每个像素都存一遍。
- 时间冗余：这是视频压缩特有的。在相邻的两帧之间，大部分内容（背景、静止物体）是完全没变的，只有少部分（比如一个人走过）发生了变化。

## 三种关键的"帧"

为了利用时间上的重复性，视频压缩定义了三种不同类型的帧，它们的分工极其明确：

### I 帧—— 关键帧

- 是什么：它就是一张完整的、独立的静态图像。
- 怎么存：完全照搬 JPEG 的流程（分块 -> DCT -> 量化 -> 编码）。它不看前面也不看后面，只靠自己。
- 作用：作为参考基准。就像盖房子的地基。不管后面怎么乱，随时可以回到 I 帧重新开始。

### P 帧—— 前向预测帧

- 是什么：它不存完整的画面，它只存"我和上一帧有什么不同"。
- 怎么存：解码器会拿前一帧（I 帧或 P 帧）作为底图，根据 P 帧里记录的"变化指令"（比如：这块像素向右移了 5 格），推算出当前画面。
- 压缩率：比 I 帧高很多，因为它丢掉了重复的背景信息。

### B 帧—— 双向预测帧

- 是什么：最狠的压缩。它不仅看"前一帧"，还看"后一帧"。
- 原理：比如前一帧球在左边，后一帧球在右边，B 帧直接猜测："球在中间"。它只记录预测算错的那一点点误差。
- 压缩率：最高，但计算量最大，且播放时需要"未来"的数据（导致会有延迟）。

## 核心技术：运动估计与运动补偿

这是视频压缩最神奇的地方，用来生成 P 帧和 B 帧。

### 运动估计

编码器会把当前帧切成小块（比如宏块），然后去上一帧里找："这个小块是从哪里跑过来的？"

比如车轮子，第一帧在位置 A，第二帧跑到了位置 B。编码器算出了一个"运动向量"：(-5, +3)，表示"向左移 5，向上移 3"。

### 运动补偿

有了运动向量，我们就不存车轮子的图像了，只存这行指令："把上一帧位置 A 的车轮子，搬到位置 B 去"。

- 残差：但是，"搬过去"的图像肯定和真实的第二帧不完全一样（可能光照变了，或者轮子转了）。这时候，我们计算"预测图"与"真实图"的差值（残差）。

## 这里的 DCT 用在哪里？

这是最容易混淆也是最精彩的一点：DCT 依然在工作，但处理的对象变了。

- 对于 I 帧：DCT 处理的是原始像素（和 JPEG 一模一样）。
- 对于 P / B 帧：DCT 处理的是"残差"。
    - 还记得上面说的"预测图"和"真实图"的差值吗？通常这个差值全是噪点或很暗的纹理（大部分是 0），非常适合用 DCT + 量化来压缩。
    - 流程：`运动估计 -> 算出运动向量 -> 算出残差 -> 对残差做 DCT -> 量化 -> 编码`。

## 总结

视频压缩就是在做两件事：

1. 找不同（运动估计/补偿）：大部分时候只告诉播放器"哪块东西移到了哪里"。
2. 压细节（DCT + 量化）：对于"移过去还对不上"的细微误差，用 DCT 把它压扁存起来。

所以，您正在看的在线视频，实际上只有极少数几帧是完整的（I 帧），剩下的绝大多数时间，您的显卡都在疯狂地做"拼图游戏"（根据运动向量搬运像素）和"修补工作"（把 DCT 解码出来的残差补上去）。

---

**<font color="#2ecc71">✅ 已格式化</font>**
