双阈值检测（Double Thresholding）是 Canny 算子中去伪存真的关键步骤。经过非极大值抑制后，图像中剩下的边缘点虽然细了，但可能混杂了很多噪声产生的弱边缘。双阈值检测通过两个门槛（阈值），像漏斗一样把真边缘筛选出来，把假边缘过滤掉。

## 1. 为什么要设"两个"阈值？

如果只设一个阈值（单阈值法）：

- 阈值设高了：虽然去除了噪声，但很容易把连续的边缘打断（比如一条长线中间变淡了一点，就会断开）。
- 阈值设低了：虽然边缘连续了，但会保留大量的噪声（假边缘）。

Canny 聪明地引入了"高阈值（High Threshold）"和"低阈值（Low Threshold）"，通过"滞后（Hysteresis）"机制解决了这个矛盾。

## 2. 三类像素的划分

根据梯度幅值（Edge Strength）与两个阈值的关系，所有候选像素被分为三类：

- 强边缘（Strong Edge）：梯度值 $\ge$ 高阈值。

    - 判定：这就是铁板钉钉的真边缘（如物体轮廓最清晰的部分）。
    - 处理：直接保留，标记为"确定的边缘"。

- 弱边缘（Weak Edge）：低阈值 $\le$ 梯度值 $<$ 高阈值。

    - 判定：这就很暧昧了，它可能是真边缘稍微暗淡的一段，也可能只是稍微强一点的噪声。
    - 处理：暂时保留，标记为"待定"，等待下一步考察。

- 非边缘（Non-Edge）：梯度值 $<$ 低阈值。

    - 判定：这就是纯粹的噪声或背景。
    - 处理：直接抑制（置为 0），扔掉不管。

## 3. 核心机制：<font color="#f79646">滞后边界跟踪</font>（Edge Tracking by Hysteresis）

这是双阈值法的灵魂所在：怎么处理那些"待定"的弱边缘？

Canny 的逻辑是：真理往往是连在一起的，孤立的大概率是谬误。

- 规则：

    - 如果一个弱边缘像素，它周围（8 邻域）哪怕只要连着一个强边缘像素，那它就"通过考核"，升级为真边缘。
    - 如果一个弱边缘像素，孤立无援，周围全是弱边缘或非边缘，根本不连通到任何强边缘上，那它就是噪声，直接被枪毙（置为 0）。

## 4. 举个生动的例子

想象你在画一条虚线：

- 强边缘就像是你下笔最重、最黑的那几段线，肯定是真的。
- 弱边缘就像是你下笔轻、断断续续的线。
- 非边缘就是纸上的脏点。

Canny 的策略是：先把最黑的线（强边缘）描出来。然后看看那些断断续续的线（弱边缘），凡是跟最黑的线连在一起的，就认为它们是一伙的，顺着描出来；凡是孤零零飘在别的地方跟谁都不连的，就当成脏点擦掉。

这样既保证了核心边缘不丢失（由强边缘确定），又保证了边缘的完整连续性（由弱边缘补充），还去除了噪声（孤立的弱边缘被杀掉）。

## 5. 阈值怎么选？

- 比例：高阈值与低阈值的比例通常推荐在 2:1 到 3:1 之间。
- 自适应：在高级实现中（如 MATLAB），阈值可以根据图像梯度的直方图自动计算，而在 OpenCV 中通常需要手动指定。

---

**<font color="#2ecc71">✅ 已格式化</font>**