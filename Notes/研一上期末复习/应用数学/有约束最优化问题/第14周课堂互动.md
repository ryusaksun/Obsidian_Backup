![[Pasted image 20260107174717.png]]
这是一个带约束的最优化问题。我们需要通过 **Karush-Kuhn-Tucker (KKT)** 条件（题目中简称为KT条件）来求解满足条件的点 $(x_1, x_2)$。

### 1. 问题建模

目标函数：

$$\min f(x) = 4x_1 - 3x_2$$

约束条件：

$$g_1(x) = -(x_1 - 3)^2 + x_2 + 1 \ge 0$$

$$g_2(x) = 4 - x_1 - x_2 \ge 0$$

$$g_3(x) = x_2 + 7 \ge 0$$

### 2. 列出 KKT 条件

对于最小化问题 $\min f(x)$ 且约束为 $g_i(x) \ge 0$，KKT 条件包括：

1. 梯度条件（平稳性）：
    
    $$\nabla f(x) - \sum_{i=1}^3 \lambda_i \nabla g_i(x) = 0$$
    
2. 互补松弛条件：
    
    $$\lambda_i g_i(x) = 0, \quad i=1,2,3$$
    
3. 原问题可行性：
    
    $$g_i(x) \ge 0$$
    
4. 对偶可行性：
    
    $$\lambda_i \ge 0$$
    

**计算梯度：**

- $\nabla f(x) = \begin{pmatrix} 4 \\ -3 \end{pmatrix}$
    
- $\nabla g_1(x) = \begin{pmatrix} -2(x_1 - 3) \\ 1 \end{pmatrix} = \begin{pmatrix} 6 - 2x_1 \\ 1 \end{pmatrix}$
    
- $\nabla g_2(x) = \begin{pmatrix} -1 \\ -1 \end{pmatrix}$
    
- $\nabla g_3(x) = \begin{pmatrix} 0 \\ 1 \end{pmatrix}$
    

**代入梯度条件得到方程组：**

$$\begin{cases} 4 - \lambda_1(6 - 2x_1) - \lambda_2(-1) - \lambda_3(0) = 0 \\ -3 - \lambda_1(1) - \lambda_2(-1) - \lambda_3(1) = 0 \end{cases}$$

整理得：

1. $$4 - \lambda_1(6 - 2x_1) + \lambda_2 = 0$$
    
2. $$-3 - \lambda_1 + \lambda_2 - \lambda_3 = 0 \implies \lambda_2 = \lambda_1 + \lambda_3 + 3$$
    

### 3. 求解 KKT 点

我们通常从**边界起作用**（Active Constraints）的情况开始假设。直观上，为了使 $4x_1 - 3x_2$ 最小（即 $x_1$ 尽可能小，$x_2$ 尽可能大），约束 $g_1$ 和 $g_2$ 很可能是起作用的（即取等号）。

**假设 $g_1(x) = 0$ 且 $g_2(x) = 0$ （即 $\lambda_1 > 0, \lambda_2 > 0$）：**

联立方程求解交点：

$$\begin{cases} -(x_1 - 3)^2 + x_2 + 1 = 0 \implies x_2 = (x_1 - 3)^2 - 1 \\ 4 - x_1 - x_2 = 0 \implies x_2 = 4 - x_1 \end{cases}$$

代入消元：

$$(x_1 - 3)^2 - 1 = 4 - x_1$$

$$x_1^2 - 6x_1 + 9 - 1 = 4 - x_1$$

$$x_1^2 - 5x_1 + 4 = 0$$

$$(x_1 - 1)(x_1 - 4) = 0$$

解得两个交点：

- **点 A:** $x_1 = 1 \implies x_2 = 4 - 1 = 3$。点为 $(1, 3)$。
    
- **点 B:** $x_1 = 4 \implies x_2 = 4 - 4 = 0$。点为 $(4, 0)$。
    

**验证这两个点是否满足 $\lambda \ge 0$：**

情况 1：检验点 $(1, 3)$

此时 $x_2 = 3 > -7$，所以 $g_3$ 不起作用，$\lambda_3 = 0$。

将 $x_1 = 1$ 和 $\lambda_3 = 0$ 代入梯度方程：

由方程 (2): $\lambda_2 = \lambda_1 + 0 + 3 = \lambda_1 + 3$

由方程 (1): $4 - \lambda_1(6 - 2(1)) + \lambda_2 = 0$

$$4 - 4\lambda_1 + (\lambda_1 + 3) = 0$$

$$7 - 3\lambda_1 = 0 \implies \lambda_1 = \frac{7}{3}$$

进而求 $\lambda_2$:

$$\lambda_2 = \frac{7}{3} + 3 = \frac{16}{3}$$

由于 $\lambda_1 = \frac{7}{3} > 0$ 且 $\lambda_2 = \frac{16}{3} > 0$，满足 KKT 条件的所有要求。

情况 2：检验点 $(4, 0)$

此时 $x_2 = 0 > -7$，所以 $\lambda_3 = 0$。

将 $x_1 = 4$ 代入梯度方程：

由方程 (2): $\lambda_2 = \lambda_1 + 3$

由方程 (1): $4 - \lambda_1(6 - 8) + \lambda_2 = 0$

$$4 + 2\lambda_1 + (\lambda_1 + 3) = 0$$

$$7 + 3\lambda_1 = 0 \implies \lambda_1 = -\frac{7}{3}$$

由于 $\lambda_1 < 0$，违反了对偶可行性条件，所以 $(4, 0)$ 不是 KKT 点。

### 结论

满足 KT 条件的点是：

$(1, 3)$

![[Pasted image 20260107181042.png]]
要判断 $\bar{x} = (2, 1)^T$ 是否为 KKT 点，我们需要验证它是否满足 KKT 条件的四个核心要素：**可行性**、**平稳性（梯度条件）**、**互补松弛性**和**对偶可行性（乘子符号）**。

### 1. 整理问题的标准形式

优化问题为：

$$\min f(x) = (x_1 - 3)^2 + (x_2 - 2)^2$$

约束条件：

1. $g_1(x) = x_1^2 + x_2^2 - 5 \le 0$ （不等式约束）
    
2. $h(x) = x_1 + 2x_2 - 4 = 0$ （等式约束）
    
3. $x_1, x_2 \ge 0$ （非负约束，可视作 $g_2, g_3$）
    

### 2. 验证步骤

#### 第一步：检查可行性 (Primal Feasibility)

先把点 $(2, 1)$ 代入约束条件看看是否满足：

- **不等式约束**：$2^2 + 1^2 - 5 = 5 - 5 = 0$。满足且取等号，说明该约束是**起作用的 (Active)**。
    
- **等式约束**：$2 + 2(1) - 4 = 4 - 4 = 0$。满足。
    
- **非负约束**：$2 > 0, 1 > 0$。满足且不起作用（内部）。
    

**结论**：该点可行，且只有约束 $g_1$ 和 $h$ 参与梯度平衡。

#### 第二步：列出梯度条件 (Stationarity)

KKT 的梯度条件方程为：

$$\nabla f(x) + \mu \nabla g_1(x) + \lambda \nabla h(x) = 0$$

其中 $\mu$ 对应不等式约束 $g_1$，要求 $\mu \ge 0$；$\lambda$ 对应等式约束，符号不限。

计算各函数在点 $(2, 1)$ 处的梯度：

1. 目标函数梯度 $\nabla f$：
    
    $$\nabla f = \begin{pmatrix} 2(x_1 - 3) \\ 2(x_2 - 2) \end{pmatrix} \xrightarrow{(2,1)} \begin{pmatrix} -2 \\ -2 \end{pmatrix}$$
    
2. 不等式约束梯度 $\nabla g_1$：
    
    $$\nabla g_1 = \begin{pmatrix} 2x_1 \\ 2x_2 \end{pmatrix} \xrightarrow{(2,1)} \begin{pmatrix} 4 \\ 2 \end{pmatrix}$$
    
3. 等式约束梯度 $\nabla h$：
    
    $$\nabla h = \begin{pmatrix} 1 \\ 2 \end{pmatrix}$$
    

#### 第三步：求解乘子 $\mu$ 和 $\lambda$

将梯度代入方程：

$$\begin{pmatrix} -2 \\ -2 \end{pmatrix} + \mu \begin{pmatrix} 4 \\ 2 \end{pmatrix} + \lambda \begin{pmatrix} 1 \\ 2 \end{pmatrix} = \begin{pmatrix} 0 \\ 0 \end{pmatrix}$$

这对应着一个二元一次方程组：

1. $4\mu + \lambda = 2$
    
2. $2\mu + 2\lambda = 2 \implies \mu + \lambda = 1$
    

由方程 (2) 得 $\lambda = 1 - \mu$，代入方程 (1)：

$$4\mu + (1 - \mu) = 2$$

$$3\mu = 1 \implies \mu = \frac{1}{3}$$

进而求得：

$$\lambda = 1 - \frac{1}{3} = \frac{2}{3}$$

#### 第四步：检查对偶可行性 (Dual Feasibility)

对于不等式约束 $g_1(x) \le 0$，KKT 条件要求其对应的拉格朗日乘子 $\mu \ge 0$。

我们计算出的结果是 $\mu = \frac{1}{3}$，显然 $\frac{1}{3} > 0$。

满足条件。

### 结论

点 $(2, 1)^T$ 满足所有 KKT 条件（可行、梯度为 0、乘子符号正确），因此它是一个 KKT 点。

**答案是：**

### **A. 对**

你的计算**思路和大部分推导其实是完全正确的**！

你之所以卡住或者觉得“有问题”，是因为在最后一步解方程组时，**漏掉了一个关键的简化步骤**，导致方程里变量太多解不出来。

你的核心问题在于：**没有利用互补松弛条件去除 $\lambda_2$ 和 $\lambda_3$。**

---

### 具体分析你的手写步骤

#### 1. 你的设定（完全正确）

在图 `743...` 中，你列出了：

- $g_2(x) = x_1 \ge 0$
    
- $g_3(x) = x_2 \ge 0$
    
- 并且你计算了 $g_2(2,1) = 2 > 0$ 和 $g_3(2,1) = 1 > 0$。
    

#### 2. 你的问题所在

在图 `8A9...` 中，你列出的方程组是：

1. $-4 - 2\mu_1 + 8\lambda_1 - 2\lambda_2 = 0$ _(这里好像有点笔误，应该是 $-2$ 而不是 $-4$，看上一步是 $-2-\mu_1...$)_
    
2. $-2 - 2\mu_1 + 2\lambda_1 - \lambda_3 = 0$
    

你保留了 $\lambda_2$ 和 $\lambda_3$ 在方程里，导致这是一个“2个方程，4个未知数”的死局。

### 修正方法：利用“互补松弛条件”

根据 KKT 条件的**互补松弛性 (Complementary Slackness)**：

> 如果约束条件 $g_i(x) > 0$（即约束在内部，不起作用），那么对应的乘子 $\lambda_i$ **必须为 0**。

- 因为点 $(2, 1)$ 满足 $x_1 = 2 > 0$，所以约束 $g_2$ 不起作用 $\implies$ **$\lambda_2 = 0$**。
    
- 因为点 $(2, 1)$ 满足 $x_2 = 1 > 0$，所以约束 $g_3$ 不起作用 $\implies$ **$\lambda_3 = 0$**。
    

---

### 帮你把方程解完

我们将 $\lambda_2 = 0, \lambda_3 = 0$ 代入你图 `82E...` 倒数第二行的方程组：

**修正后的方程组：**

1. $-2 - \mu_1 + 4\lambda_1 - 0 = 0$ $\implies \mu_1 = 4\lambda_1 - 2$
    
2. $-2 - 2\mu_1 + 2\lambda_1 - 0 = 0$
    

求解：

把 (1) 代入 (2)：

$$-2 - 2(4\lambda_1 - 2) + 2\lambda_1 = 0$$

$$-2 - 8\lambda_1 + 4 + 2\lambda_1 = 0$$

$$2 - 6\lambda_1 = 0$$

$$\lambda_1 = \frac{1}{3}$$

然后求 $\mu_1$（这一步其实不重要，因为等式约束的乘子符号无所谓）：

$$\mu_1 = 4(\frac{1}{3}) - 2 = \frac{4}{3} - \frac{6}{3} = -\frac{2}{3}$$

### 结论验证

你需要检查计算出的 $\lambda_1$ 是否符合 KKT 的**对偶可行性（符号要求）**。

- 你设定的约束是 $g_1(x) = 5 - x_1^2 - x_2^2$（即 $g \ge 0$ 形式）。
    
- 你使用的 KKT 方程是 $\nabla f - \lambda \nabla g = 0$。
    
- 在这种设定下，要求 $\lambda_1 \ge 0$。
    
- 你算出的 **$\lambda_1 = \frac{1}{3} > 0$**。
    

**完全符合！**

### 总结

你的算法没有大问题，只是**忘了把 $\lambda_2$ 和 $\lambda_3$ 设为 0**。加上这一步，你就能算出正确答案了。